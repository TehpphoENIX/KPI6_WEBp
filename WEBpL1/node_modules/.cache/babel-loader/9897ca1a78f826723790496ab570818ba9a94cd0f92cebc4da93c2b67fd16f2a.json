{"ast":null,"code":"/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar DraftOffsetKey = require(\"./DraftOffsetKey\");\nvar nullthrows = require(\"fbjs/lib/nullthrows\");\nfunction getUpdatedSelectionState(editorState, anchorKey, anchorOffset, focusKey, focusOffset) {\n  var selection = nullthrows(editorState.getSelection());\n  if (!anchorKey || !focusKey) {\n    // If we cannot make sense of the updated selection state, stick to the current one.\n    if (process.env.NODE_ENV !== \"production\") {\n      /* eslint-disable-next-line */\n      console.warn('Invalid selection state.', arguments, editorState.toJS());\n    }\n    return selection;\n  }\n  var anchorPath = DraftOffsetKey.decode(anchorKey);\n  var anchorBlockKey = anchorPath.blockKey;\n  var anchorLeafBlockTree = editorState.getBlockTree(anchorBlockKey);\n  var anchorLeaf = anchorLeafBlockTree && anchorLeafBlockTree.getIn([anchorPath.decoratorKey, 'leaves', anchorPath.leafKey]);\n  var focusPath = DraftOffsetKey.decode(focusKey);\n  var focusBlockKey = focusPath.blockKey;\n  var focusLeafBlockTree = editorState.getBlockTree(focusBlockKey);\n  var focusLeaf = focusLeafBlockTree && focusLeafBlockTree.getIn([focusPath.decoratorKey, 'leaves', focusPath.leafKey]);\n  if (!anchorLeaf || !focusLeaf) {\n    // If we cannot make sense of the updated selection state, stick to the current one.\n    if (process.env.NODE_ENV !== \"production\") {\n      /* eslint-disable-next-line */\n      console.warn('Invalid selection state.', arguments, editorState.toJS());\n    }\n    return selection;\n  }\n  var anchorLeafStart = anchorLeaf.get('start');\n  var focusLeafStart = focusLeaf.get('start');\n  var anchorBlockOffset = anchorLeaf ? anchorLeafStart + anchorOffset : null;\n  var focusBlockOffset = focusLeaf ? focusLeafStart + focusOffset : null;\n  var areEqual = selection.getAnchorKey() === anchorBlockKey && selection.getAnchorOffset() === anchorBlockOffset && selection.getFocusKey() === focusBlockKey && selection.getFocusOffset() === focusBlockOffset;\n  if (areEqual) {\n    return selection;\n  }\n  var isBackward = false;\n  if (anchorBlockKey === focusBlockKey) {\n    var anchorLeafEnd = anchorLeaf.get('end');\n    var focusLeafEnd = focusLeaf.get('end');\n    if (focusLeafStart === anchorLeafStart && focusLeafEnd === anchorLeafEnd) {\n      isBackward = focusOffset < anchorOffset;\n    } else {\n      isBackward = focusLeafStart < anchorLeafStart;\n    }\n  } else {\n    var startKey = editorState.getCurrentContent().getBlockMap().keySeq().skipUntil(function (v) {\n      return v === anchorBlockKey || v === focusBlockKey;\n    }).first();\n    isBackward = startKey === focusBlockKey;\n  }\n  return selection.merge({\n    anchorKey: anchorBlockKey,\n    anchorOffset: anchorBlockOffset,\n    focusKey: focusBlockKey,\n    focusOffset: focusBlockOffset,\n    isBackward: isBackward\n  });\n}\nmodule.exports = getUpdatedSelectionState;","map":{"version":3,"names":["DraftOffsetKey","require","nullthrows","getUpdatedSelectionState","editorState","anchorKey","anchorOffset","focusKey","focusOffset","selection","getSelection","process","env","NODE_ENV","console","warn","arguments","toJS","anchorPath","decode","anchorBlockKey","blockKey","anchorLeafBlockTree","getBlockTree","anchorLeaf","getIn","decoratorKey","leafKey","focusPath","focusBlockKey","focusLeafBlockTree","focusLeaf","anchorLeafStart","get","focusLeafStart","anchorBlockOffset","focusBlockOffset","areEqual","getAnchorKey","getAnchorOffset","getFocusKey","getFocusOffset","isBackward","anchorLeafEnd","focusLeafEnd","startKey","getCurrentContent","getBlockMap","keySeq","skipUntil","v","first","merge","module","exports"],"sources":["C:/Users/Teh_phoENIX/source/repos/WEBp/WEBpL1/node_modules/draft-js/lib/getUpdatedSelectionState.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar DraftOffsetKey = require(\"./DraftOffsetKey\");\n\nvar nullthrows = require(\"fbjs/lib/nullthrows\");\n\nfunction getUpdatedSelectionState(editorState, anchorKey, anchorOffset, focusKey, focusOffset) {\n  var selection = nullthrows(editorState.getSelection());\n\n  if (!anchorKey || !focusKey) {\n    // If we cannot make sense of the updated selection state, stick to the current one.\n    if (process.env.NODE_ENV !== \"production\") {\n      /* eslint-disable-next-line */\n      console.warn('Invalid selection state.', arguments, editorState.toJS());\n    }\n\n    return selection;\n  }\n\n  var anchorPath = DraftOffsetKey.decode(anchorKey);\n  var anchorBlockKey = anchorPath.blockKey;\n  var anchorLeafBlockTree = editorState.getBlockTree(anchorBlockKey);\n  var anchorLeaf = anchorLeafBlockTree && anchorLeafBlockTree.getIn([anchorPath.decoratorKey, 'leaves', anchorPath.leafKey]);\n  var focusPath = DraftOffsetKey.decode(focusKey);\n  var focusBlockKey = focusPath.blockKey;\n  var focusLeafBlockTree = editorState.getBlockTree(focusBlockKey);\n  var focusLeaf = focusLeafBlockTree && focusLeafBlockTree.getIn([focusPath.decoratorKey, 'leaves', focusPath.leafKey]);\n\n  if (!anchorLeaf || !focusLeaf) {\n    // If we cannot make sense of the updated selection state, stick to the current one.\n    if (process.env.NODE_ENV !== \"production\") {\n      /* eslint-disable-next-line */\n      console.warn('Invalid selection state.', arguments, editorState.toJS());\n    }\n\n    return selection;\n  }\n\n  var anchorLeafStart = anchorLeaf.get('start');\n  var focusLeafStart = focusLeaf.get('start');\n  var anchorBlockOffset = anchorLeaf ? anchorLeafStart + anchorOffset : null;\n  var focusBlockOffset = focusLeaf ? focusLeafStart + focusOffset : null;\n  var areEqual = selection.getAnchorKey() === anchorBlockKey && selection.getAnchorOffset() === anchorBlockOffset && selection.getFocusKey() === focusBlockKey && selection.getFocusOffset() === focusBlockOffset;\n\n  if (areEqual) {\n    return selection;\n  }\n\n  var isBackward = false;\n\n  if (anchorBlockKey === focusBlockKey) {\n    var anchorLeafEnd = anchorLeaf.get('end');\n    var focusLeafEnd = focusLeaf.get('end');\n\n    if (focusLeafStart === anchorLeafStart && focusLeafEnd === anchorLeafEnd) {\n      isBackward = focusOffset < anchorOffset;\n    } else {\n      isBackward = focusLeafStart < anchorLeafStart;\n    }\n  } else {\n    var startKey = editorState.getCurrentContent().getBlockMap().keySeq().skipUntil(function (v) {\n      return v === anchorBlockKey || v === focusBlockKey;\n    }).first();\n    isBackward = startKey === focusBlockKey;\n  }\n\n  return selection.merge({\n    anchorKey: anchorBlockKey,\n    anchorOffset: anchorBlockOffset,\n    focusKey: focusBlockKey,\n    focusOffset: focusBlockOffset,\n    isBackward: isBackward\n  });\n}\n\nmodule.exports = getUpdatedSelectionState;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}