{"ast":null,"code":"/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar DataTransfer = require(\"fbjs/lib/DataTransfer\");\nvar DraftModifier = require(\"./DraftModifier\");\nvar EditorState = require(\"./EditorState\");\nvar findAncestorOffsetKey = require(\"./findAncestorOffsetKey\");\nvar getCorrectDocumentFromNode = require(\"./getCorrectDocumentFromNode\");\nvar getTextContentFromFiles = require(\"./getTextContentFromFiles\");\nvar getUpdatedSelectionState = require(\"./getUpdatedSelectionState\");\nvar getWindowForNode = require(\"./getWindowForNode\");\nvar isEventHandled = require(\"./isEventHandled\");\nvar nullthrows = require(\"fbjs/lib/nullthrows\");\n/**\n * Get a SelectionState for the supplied mouse event.\n */\n\nfunction getSelectionForEvent(event, editorState) {\n  var node = null;\n  var offset = null;\n  var eventTargetDocument = getCorrectDocumentFromNode(event.currentTarget);\n  /* $FlowFixMe[prop-missing] (>=0.68.0 site=www,mobile) This comment\n   * suppresses an error found when Flow v0.68 was deployed. To see the error\n   * delete this comment and run Flow. */\n\n  if (typeof eventTargetDocument.caretRangeFromPoint === 'function') {\n    /* $FlowFixMe[incompatible-use] (>=0.68.0 site=www,mobile) This comment\n     * suppresses an error found when Flow v0.68 was deployed. To see the error\n     * delete this comment and run Flow. */\n    var dropRange = eventTargetDocument.caretRangeFromPoint(event.x, event.y);\n    node = dropRange.startContainer;\n    offset = dropRange.startOffset;\n  } else if (event.rangeParent) {\n    node = event.rangeParent;\n    offset = event.rangeOffset;\n  } else {\n    return null;\n  }\n  node = nullthrows(node);\n  offset = nullthrows(offset);\n  var offsetKey = nullthrows(findAncestorOffsetKey(node));\n  return getUpdatedSelectionState(editorState, offsetKey, offset, offsetKey, offset);\n}\nvar DraftEditorDragHandler = {\n  /**\n   * Drag originating from input terminated.\n   */\n  onDragEnd: function onDragEnd(editor) {\n    editor.exitCurrentMode();\n    endDrag(editor);\n  },\n  /**\n   * Handle data being dropped.\n   */\n  onDrop: function onDrop(editor, e) {\n    var data = new DataTransfer(e.nativeEvent.dataTransfer);\n    var editorState = editor._latestEditorState;\n    var dropSelection = getSelectionForEvent(e.nativeEvent, editorState);\n    e.preventDefault();\n    editor._dragCount = 0;\n    editor.exitCurrentMode();\n    if (dropSelection == null) {\n      return;\n    }\n    var files = data.getFiles();\n    if (files.length > 0) {\n      if (editor.props.handleDroppedFiles && isEventHandled(editor.props.handleDroppedFiles(dropSelection, files))) {\n        return;\n      }\n      /* $FlowFixMe[incompatible-call] This comment suppresses an error found\n       * DataTransfer was typed. getFiles() returns an array of <Files extends\n       * Blob>, not Blob */\n\n      getTextContentFromFiles(files, function (fileText) {\n        fileText && editor.update(insertTextAtSelection(editorState, dropSelection, fileText));\n      });\n      return;\n    }\n    var dragType = editor._internalDrag ? 'internal' : 'external';\n    if (editor.props.handleDrop && isEventHandled(editor.props.handleDrop(dropSelection, data, dragType))) {// handled\n    } else if (editor._internalDrag) {\n      editor.update(moveText(editorState, dropSelection));\n    } else {\n      editor.update(insertTextAtSelection(editorState, dropSelection, data.getText()));\n    }\n    endDrag(editor);\n  }\n};\nfunction endDrag(editor) {\n  editor._internalDrag = false; // Fix issue #1383\n  // Prior to React v16.5.0 onDrop breaks onSelect event:\n  // https://github.com/facebook/react/issues/11379.\n  // Dispatching a mouseup event on DOM node will make it go back to normal.\n\n  var editorNode = editor.editorContainer;\n  if (editorNode) {\n    var mouseUpEvent = new MouseEvent('mouseup', {\n      view: getWindowForNode(editorNode),\n      bubbles: true,\n      cancelable: true\n    });\n    editorNode.dispatchEvent(mouseUpEvent);\n  }\n}\nfunction moveText(editorState, targetSelection) {\n  var newContentState = DraftModifier.moveText(editorState.getCurrentContent(), editorState.getSelection(), targetSelection);\n  return EditorState.push(editorState, newContentState, 'insert-fragment');\n}\n/**\n * Insert text at a specified selection.\n */\n\nfunction insertTextAtSelection(editorState, selection, text) {\n  var newContentState = DraftModifier.insertText(editorState.getCurrentContent(), selection, text, editorState.getCurrentInlineStyle());\n  return EditorState.push(editorState, newContentState, 'insert-fragment');\n}\nmodule.exports = DraftEditorDragHandler;","map":{"version":3,"names":["DataTransfer","require","DraftModifier","EditorState","findAncestorOffsetKey","getCorrectDocumentFromNode","getTextContentFromFiles","getUpdatedSelectionState","getWindowForNode","isEventHandled","nullthrows","getSelectionForEvent","event","editorState","node","offset","eventTargetDocument","currentTarget","caretRangeFromPoint","dropRange","x","y","startContainer","startOffset","rangeParent","rangeOffset","offsetKey","DraftEditorDragHandler","onDragEnd","editor","exitCurrentMode","endDrag","onDrop","e","data","nativeEvent","dataTransfer","_latestEditorState","dropSelection","preventDefault","_dragCount","files","getFiles","length","props","handleDroppedFiles","fileText","update","insertTextAtSelection","dragType","_internalDrag","handleDrop","moveText","getText","editorNode","editorContainer","mouseUpEvent","MouseEvent","view","bubbles","cancelable","dispatchEvent","targetSelection","newContentState","getCurrentContent","getSelection","push","selection","text","insertText","getCurrentInlineStyle","module","exports"],"sources":["C:/Users/Teh_phoENIX/source/repos/WEBp/WEBpL1/node_modules/draft-js/lib/DraftEditorDragHandler.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar DataTransfer = require(\"fbjs/lib/DataTransfer\");\n\nvar DraftModifier = require(\"./DraftModifier\");\n\nvar EditorState = require(\"./EditorState\");\n\nvar findAncestorOffsetKey = require(\"./findAncestorOffsetKey\");\n\nvar getCorrectDocumentFromNode = require(\"./getCorrectDocumentFromNode\");\n\nvar getTextContentFromFiles = require(\"./getTextContentFromFiles\");\n\nvar getUpdatedSelectionState = require(\"./getUpdatedSelectionState\");\n\nvar getWindowForNode = require(\"./getWindowForNode\");\n\nvar isEventHandled = require(\"./isEventHandled\");\n\nvar nullthrows = require(\"fbjs/lib/nullthrows\");\n/**\n * Get a SelectionState for the supplied mouse event.\n */\n\n\nfunction getSelectionForEvent(event, editorState) {\n  var node = null;\n  var offset = null;\n  var eventTargetDocument = getCorrectDocumentFromNode(event.currentTarget);\n  /* $FlowFixMe[prop-missing] (>=0.68.0 site=www,mobile) This comment\n   * suppresses an error found when Flow v0.68 was deployed. To see the error\n   * delete this comment and run Flow. */\n\n  if (typeof eventTargetDocument.caretRangeFromPoint === 'function') {\n    /* $FlowFixMe[incompatible-use] (>=0.68.0 site=www,mobile) This comment\n     * suppresses an error found when Flow v0.68 was deployed. To see the error\n     * delete this comment and run Flow. */\n    var dropRange = eventTargetDocument.caretRangeFromPoint(event.x, event.y);\n    node = dropRange.startContainer;\n    offset = dropRange.startOffset;\n  } else if (event.rangeParent) {\n    node = event.rangeParent;\n    offset = event.rangeOffset;\n  } else {\n    return null;\n  }\n\n  node = nullthrows(node);\n  offset = nullthrows(offset);\n  var offsetKey = nullthrows(findAncestorOffsetKey(node));\n  return getUpdatedSelectionState(editorState, offsetKey, offset, offsetKey, offset);\n}\n\nvar DraftEditorDragHandler = {\n  /**\n   * Drag originating from input terminated.\n   */\n  onDragEnd: function onDragEnd(editor) {\n    editor.exitCurrentMode();\n    endDrag(editor);\n  },\n\n  /**\n   * Handle data being dropped.\n   */\n  onDrop: function onDrop(editor, e) {\n    var data = new DataTransfer(e.nativeEvent.dataTransfer);\n    var editorState = editor._latestEditorState;\n    var dropSelection = getSelectionForEvent(e.nativeEvent, editorState);\n    e.preventDefault();\n    editor._dragCount = 0;\n    editor.exitCurrentMode();\n\n    if (dropSelection == null) {\n      return;\n    }\n\n    var files = data.getFiles();\n\n    if (files.length > 0) {\n      if (editor.props.handleDroppedFiles && isEventHandled(editor.props.handleDroppedFiles(dropSelection, files))) {\n        return;\n      }\n      /* $FlowFixMe[incompatible-call] This comment suppresses an error found\n       * DataTransfer was typed. getFiles() returns an array of <Files extends\n       * Blob>, not Blob */\n\n\n      getTextContentFromFiles(files, function (fileText) {\n        fileText && editor.update(insertTextAtSelection(editorState, dropSelection, fileText));\n      });\n      return;\n    }\n\n    var dragType = editor._internalDrag ? 'internal' : 'external';\n\n    if (editor.props.handleDrop && isEventHandled(editor.props.handleDrop(dropSelection, data, dragType))) {// handled\n    } else if (editor._internalDrag) {\n      editor.update(moveText(editorState, dropSelection));\n    } else {\n      editor.update(insertTextAtSelection(editorState, dropSelection, data.getText()));\n    }\n\n    endDrag(editor);\n  }\n};\n\nfunction endDrag(editor) {\n  editor._internalDrag = false; // Fix issue #1383\n  // Prior to React v16.5.0 onDrop breaks onSelect event:\n  // https://github.com/facebook/react/issues/11379.\n  // Dispatching a mouseup event on DOM node will make it go back to normal.\n\n  var editorNode = editor.editorContainer;\n\n  if (editorNode) {\n    var mouseUpEvent = new MouseEvent('mouseup', {\n      view: getWindowForNode(editorNode),\n      bubbles: true,\n      cancelable: true\n    });\n    editorNode.dispatchEvent(mouseUpEvent);\n  }\n}\n\nfunction moveText(editorState, targetSelection) {\n  var newContentState = DraftModifier.moveText(editorState.getCurrentContent(), editorState.getSelection(), targetSelection);\n  return EditorState.push(editorState, newContentState, 'insert-fragment');\n}\n/**\n * Insert text at a specified selection.\n */\n\n\nfunction insertTextAtSelection(editorState, selection, text) {\n  var newContentState = DraftModifier.insertText(editorState.getCurrentContent(), selection, text, editorState.getCurrentInlineStyle());\n  return EditorState.push(editorState, newContentState, 'insert-fragment');\n}\n\nmodule.exports = DraftEditorDragHandler;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}